import { useQuery } from '@tanstack/react-query';
import { QUERIES } from 'modules/Shared/constants/queries';
import { useAgentContext } from 'modules/Agent/hooks';
import VulnerabilityService from 'modules/Vulnerability/api/VulnerabilityService';

export const useAgentSeveritySummaryQuery = () => {
  const { selectedAgentId } = useAgentContext();

  const {
    isLoading: getAgentSeveritySummaryIsLoading,
    data: getAgentSeveritySummaryData,
  } = useQuery(
    [QUERIES.VULNERABILITY.GET_AGENT_SEVERITY_SUMMARY_QUERY, selectedAgentId],
    () => VulnerabilityService.getAgentSeveritySummary(selectedAgentId!)
  );

  return {
    getAgentSeveritySummaryData: getAgentSeveritySummaryData || {},
    getAgentSeveritySummaryIsLoading,
  };
};
